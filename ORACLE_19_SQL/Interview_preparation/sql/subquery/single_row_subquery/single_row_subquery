<!-- This subquery returns exactly one row and one column (a single value). Because it returns only one value, you use standard comparison operators like =, >, <, or <>.



-- The subquery (inner query) executes before the main 
-- query (outer query).
-- â€¢ The result of the subquery is used by the main query.


SELECT last_name, hire_date
FROM   employees 
WHERE  hire_date > (SELECT hire_date 
FROM   employees
WHERE  last_name = 'Davies');


When to use: When you need to compare a value against a specific metric, like an average or a specific person's salary.






Example: Find employees who earn more than the average salary. -->



SELECT employee_name, salary
FROM employees
WHERE salary > (SELECT AVG(salary) FROM employees);


<!-- Display the employees whose job ID is the same as that of employee 141: -->

SELECT last_name, job_id
FROM employees
WHERE job_id =

(SELECT job_id
FROM employees
WHERE employee_id = 141);






<!-- "Identify all employees who hold the same job title as 'Taylor' but earn a higher salary than 'Taylor'. Display their last names, job IDs, and salaries." -->







SELECT last_name, job_id, salary
FROM employees
WHERE job_id =

(SELECT job_id
FROM employees
WHERE last_name = 'Taylor')

AND salary >

(SELECT salary
FROM employees
WHERE last_name = 'Taylor');


<!-- Using Group Functions in a Subquery -->

SELECT last_name, job_id, salary
FROM employees
WHERE salary =

(SELECT MIN(salary)
FROM employees);



-- HAVING Clause with Subqueries


SELECT   department_id, MIN(salary)
FROM     employees
GROUP BY department_id
HAVING   MIN(salary) >
(SELECT MIN(salary)
FROM   employees
WHERE  department_id = 30);



SELECT   job_id, AVG(salary)
FROM     employees
GROUP BY job_id
HAVING   AVG(salary) = (SELECT 
  MIN(AVG(salary))
FROM   
  employees
GROUP BY job_id);