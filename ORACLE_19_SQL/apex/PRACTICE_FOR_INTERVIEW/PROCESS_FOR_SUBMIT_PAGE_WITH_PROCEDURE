DECLARE
    v_new_quot_id NUMBER;
BEGIN
    insert_data_quotation(
        p_req_id      => :P38_REQ_ID,
        p_create_by   => :P38_CREATE_BY,
        p_quotation_id => v_new_quot_id
    );

    -- Set the APEX item to the new quotation ID
    :P38_QUOT_MASTER_ID := v_new_quot_id;

    -- Clear the collection
    IF APEX_COLLECTION.COLLECTION_EXISTS('REQ_ITEMS') THEN
        APEX_COLLECTION.TRUNCATE_COLLECTION('REQ_ITEMS');
    END IF;
END;

BEGIN
    -- প্রসিডিউর কল করা
    insert_data_requisition(
        p_priority  => :P18_PRIORITY,
        p_create_by => :P18_CREATE_BY
    );
    
    -- ইনসার্ট হয়ে গেলে কালেকশন খালি করা
    IF APEX_COLLECTION.COLLECTION_EXISTS('REQUISITION') THEN
        APEX_COLLECTION.TRUNCATE_COLLECTION('REQUISITION');
    END IF;
END;