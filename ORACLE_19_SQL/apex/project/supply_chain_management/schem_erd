-- =========================
-- HR MODULE
-- =========================
CREATE TABLE DEPARTMENTS (
    DEPARTMENT_ID NUMBER PRIMARY KEY,
    DEPARTMENT_NAME VARCHAR2(100) NOT NULL,
    DESCRIPTION VARCHAR2(255),
    STATUS VARCHAR2(20),
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE
);

CREATE TABLE DESIGNATION (
    DESIGNATION_ID NUMBER PRIMARY KEY,
    DESIGNATION_NAME VARCHAR2(100),
    DESCRIPTION VARCHAR2(255),
    STATUS VARCHAR2(20),
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE
);

CREATE TABLE EMPLOYEES (
    EMPLOYEE_ID NUMBER PRIMARY KEY,
    EMPLOYEE_CODE VARCHAR2(30),
    FIRST_NAME VARCHAR2(100) NOT NULL,
    LAST_NAME VARCHAR2(100) NOT NULL,
    FATHER_NAME VARCHAR2(100),
    MOTHER_NAME VARCHAR2(100),
    PRESENT_ADDRESS VARCHAR2(350),
    PERMANENT_ADDRESS VARCHAR2(350),
    SALARY NUMBER(10,2),
    JOIN_DATE DATE,
    DATE_OF_BIRTH DATE,
    NID NUMBER,
    EMAIL VARCHAR2(100),
    CONTACT_NO VARCHAR2(100),
    GENDER VARCHAR2(20),
    RELIGION VARCHAR2(50),
    NATIONALITY VARCHAR2(50),
    BLOOD_GROUP VARCHAR2(10),
    DESIGNATION_ID NUMBER,
    DEPARTMENT_ID NUMBER,
    MANAGER_ID NUMBER,
    EMPLOYEE_IMAGE BLOB,
    EMPLOYEE_STATUS VARCHAR2(20),
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE
);

-- =========================
-- PRODUCT & INVENTORY MODULE
-- =========================
CREATE TABLE PRODUCT_CATEGORY (
    CATEGORY_ID NUMBER PRIMARY KEY,
    CATEGORY_NAME VARCHAR2(100),
    DESCRIPTION VARCHAR2(255),
    STATUS VARCHAR2(20),
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE
);

CREATE TABLE PRODUCT_BRAND (
    BRAND_ID NUMBER PRIMARY KEY,
    BRAND_NAME VARCHAR2(100),
    DESCRIPTION VARCHAR2(255),
    STATUS VARCHAR2(20),
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE
);

CREATE TABLE PRODUCT_TYPE (
    TYPE_ID NUMBER PRIMARY KEY,
    TYPE_NAME VARCHAR2(100),
    DESCRIPTION VARCHAR2(255),
    STATUS VARCHAR2(20),
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE
);

CREATE TABLE PRODUCTS (
    PRODUCT_ID NUMBER PRIMARY KEY,
    PRODUCT_NAME VARCHAR2(150),
    PURCHASE_PRICE NUMBER(10,2),
    SELL_PRICE NUMBER(10,2),
    UNIT_PRICE NUMBER(10,2),
    BRAND_ID NUMBER,
    CATEGORY_ID NUMBER,
    TYPE_ID NUMBER,
    SKU VARCHAR2(50),
    DESCRIPTION VARCHAR2(255),
    IS_ACTIVE CHAR(1) DEFAULT 'Y',
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE
);

CREATE TABLE WAREHOUSE_LIST (
    WAREHOUSE_LIST_ID NUMBER PRIMARY KEY,
    WAREHOUSE_CODE VARCHAR2(30),
    WAREHOUSE_NAME VARCHAR2(100),
    LOCATION VARCHAR2(100),
    CITY VARCHAR2(50),
    CAPACITY NUMBER,
    STATUS VARCHAR2(20),
    REMARKS VARCHAR2(255),
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE
);

CREATE TABLE STOCK_MOVEMENT (
    STOCK_ID NUMBER PRIMARY KEY,
    PRODUCT_ID NUMBER,
    WAREHOUSE_LIST_ID NUMBER,
    IN_QTY NUMBER,
    OUT_QTY NUMBER,
    REF_TYPE VARCHAR2(30),
    REF_ID NUMBER,
    CREATED_DATE DATE DEFAULT SYSDATE
);

-- =========================
-- SUPPLIER & PURCHASE MODULE
-- =========================
CREATE TABLE SUPPLIERS (
    SUPPLIER_ID NUMBER PRIMARY KEY,
    SUPPLIER_NAME VARCHAR2(150),
    CONTACT_PERSON VARCHAR2(100),
    CONTACT_NO VARCHAR2(20),
    EMAIL VARCHAR2(100),
    CITY VARCHAR2(50),
    TIN_NUMBER VARCHAR2(50),
    PAYMENT_TERMS VARCHAR2(50),
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE
);

CREATE TABLE REQ_MASTER (
    REQUISITION_ID NUMBER PRIMARY KEY,
    REQUISITION_DATE DATE,
    REQUESTED_BY NUMBER,
    TOTAL_AMOUNT NUMBER,
    REMARKS VARCHAR2(200),
    QUOT_STATUS NUMBER,
    CREATED_DATE DATE DEFAULT SYSDATE
);

CREATE TABLE REQ_DETAILS (
    REQ_DETAIL_ID NUMBER PRIMARY KEY,
    REQUISITION_ID NUMBER,
    PRODUCT_ID NUMBER,
    QTY_REQUESTED NUMBER,
    PURCHASE_PRICE NUMBER,
    SELL_PRICE NUMBER,
    REMARKS VARCHAR2(100),
    CREATED_DATE DATE DEFAULT SYSDATE
);

CREATE TABLE QUOTATION_MASTER (
    QUOT_MASTER_ID NUMBER PRIMARY KEY,
    REQ_ID NUMBER,
    QUOT_DATE DATE,
    CREATED_BY VARCHAR2(50),
    CREATED_DATE DATE DEFAULT SYSDATE,
    APPROVED NUMBER
);

CREATE TABLE QUOTATION_DETAILS (
    QUOT_DET_ID NUMBER PRIMARY KEY,
    QUOT_MASTER_ID NUMBER,
    SUPPLIER_ID NUMBER,
    PRODUCT_ID NUMBER,
    REQ_QUANTITY NUMBER,
    QUTE_QUANTITY NUMBER,
    QUOTATION_PRICE NUMBER(10,2),
    DELIVERY_DATE DATE,
    STATUS VARCHAR2(20),
    APPROVE_STATUS VARCHAR2(20),
    REMARKS VARCHAR2(255)
);

CREATE TABLE PURCHASE_MASTER (
    PURCHASE_ID NUMBER PRIMARY KEY,
    QUOT_MASTER_ID NUMBER,
    SUPPLIER_ID NUMBER,
    PURCHASE_DATE DATE,
    TOTAL_AMOUNT NUMBER(10,2),
    PAYMENT_STATUS VARCHAR2(20),
    APPROVAL_STATUS VARCHAR2(20),
    CREATED_BY VARCHAR2(50),
    CREATED_DATE DATE DEFAULT SYSDATE
);

CREATE TABLE PURCHASE_DETAILS (
    PURCHASE_DETAIL_ID NUMBER PRIMARY KEY,
    PURCHASE_ID NUMBER,
    PRODUCT_ID NUMBER,
    QUTE_QUANTITY NUMBER,
    QUATATION_PRICE NUMBER(10,2),
    TOTAL_PRICE NUMBER(10,2),
    VAT_PERCENTAGE NUMBER(5,2),
    NET NUMBER(10,2),
    CREATED_DATE DATE DEFAULT SYSDATE
);

-- =========================
-- SALES MODULE
-- =========================
CREATE TABLE CUSTOMER (
    CUSTOMER_ID NUMBER PRIMARY KEY,
    CUSTOMER_CODE VARCHAR2(30),
    CUSTOMER_NAME VARCHAR2(100),
    GENDER VARCHAR2(10),
    PHONE_NUMBER VARCHAR2(20),
    EMAIL VARCHAR2(100),
    ADDRESS VARCHAR2(200),
    IS_ACTIVE CHAR(1),
    CREATED_DATE DATE DEFAULT SYSDATE
);

CREATE TABLE SELL_ORDER_MASTER (
    SELL_ORDER_ID NUMBER PRIMARY KEY,
    CUSTOMER_ID NUMBER,
    SALE_DATE DATE,
    TOTAL_AMOUNT NUMBER(10,2),
    PAID_AMOUNT NUMBER(10,2),
    DUE_AMOUNT NUMBER(10,2),
    DISCOUNT_PERCENTAGE NUMBER(5,2),
    DISCOUNT_AMOUNT NUMBER(10,2),
    NET_PAYABLE_AMO NUMBER(10,2),
    INVOICE_NO VARCHAR2(50),
    PAYMENT_METHOD VARCHAR2(30),
    PAYMENT_STATUS VARCHAR2(20),
    DELIVERY_STATUS VARCHAR2(20),
    CREATED_BY VARCHAR2(50),
    CREATED_DATE DATE DEFAULT SYSDATE
);

CREATE TABLE SELL_ORDER_DETAILS (
    SELL_ORDER_DETAIL_ID NUMBER PRIMARY KEY,
    SELL_ORDER_ID NUMBER,
    PRODUCT_ID NUMBER,
    WAREHOUSE_LIST_ID NUMBER,
    PRICE NUMBER(10,2),
    QUANTITY NUMBER,
    TOTAL_AMOUNT NUMBER(10,2),
    DISCOUNT_PERCENT NUMBER(5,2),
    DISCOUNT_AMOUNT NUMBER(10,2),
    TAX_PERCENT NUMBER(5,2),
    TAX_AMOUNT NUMBER(10,2),
    CREATED_DATE DATE DEFAULT SYSDATE
);

-- =========================
-- USER & SECURITY
-- =========================
CREATE TABLE USER_INFO (
    USER_ID NUMBER PRIMARY KEY,
    EMPLOYEE_ID NUMBER,
    USERNAME VARCHAR2(100),
    PASSWORD_HASH VARCHAR2(255),
    ROLE VARCHAR2(50),
    STATUS VARCHAR2(20),
    CREATED_DATE DATE DEFAULT SYSDATE
);

-- =========================
-- PRODUCT RETURN MODULE
-- =========================
CREATE TABLE SALES_RETURN_MASTER (
    SALES_RETURN_ID NUMBER PRIMARY KEY,
    SELL_ORDER_ID NUMBER,
    CUSTOMER_ID NUMBER,
    RETURN_DATE DATE DEFAULT SYSDATE,
    RETURN_REASON VARCHAR2(200),
    TOTAL_RETURN_AMOUNT NUMBER(10,2),
    STATUS VARCHAR2(20),
    CREATED_BY VARCHAR2(50),
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE
);

CREATE TABLE SALES_RETURN_DETAILS (
    SALES_RETURN_DETAIL_ID NUMBER PRIMARY KEY,
    SALES_RETURN_ID NUMBER,
    PRODUCT_ID NUMBER,
    RETURN_QTY NUMBER,
    UNIT_PRICE NUMBER(10,2),
    RETURN_AMOUNT NUMBER(10,2),
    WAREHOUSE_LIST_ID NUMBER,
    REMARKS VARCHAR2(200)
);

CREATE TABLE PURCHASE_RETURN_MASTER (
    PURCHASE_RETURN_ID NUMBER PRIMARY KEY,
    PURCHASE_ID NUMBER,
    SUPPLIER_ID NUMBER,
    RETURN_DATE DATE DEFAULT SYSDATE,
    RETURN_REASON VARCHAR2(200),
    TOTAL_RETURN_AMOUNT NUMBER(10,2),
    STATUS VARCHAR2(20),
    CREATED_BY VARCHAR2(50),
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE
);

CREATE TABLE PURCHASE_RETURN_DETAILS (
    PURCHASE_RETURN_DETAIL_ID NUMBER PRIMARY KEY,
    PURCHASE_RETURN_ID NUMBER,
    PRODUCT_ID NUMBER,
    RETURN_QTY NUMBER,
    UNIT_PRICE NUMBER(10,2),
    RETURN_AMOUNT NUMBER(10,2),
    WAREHOUSE_LIST_ID NUMBER,
    REMARKS VARCHAR2(200)
);

-- =========================
-- =========================
-- HR MODULE
-- =========================
ALTER TABLE EMPLOYEES
ADD CONSTRAINT FK_EMP_DESIGNATION
FOREIGN KEY (DESIGNATION_ID) REFERENCES DESIGNATION(DESIGNATION_ID);

ALTER TABLE EMPLOYEES
ADD CONSTRAINT FK_EMP_DEPARTMENT
FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENTS(DEPARTMENT_ID);

ALTER TABLE EMPLOYEES
ADD CONSTRAINT FK_EMP_MANAGER
FOREIGN KEY (MANAGER_ID) REFERENCES EMPLOYEES(EMPLOYEE_ID);

-- =========================
-- PRODUCT & INVENTORY
-- =========================
ALTER TABLE PRODUCTS
ADD CONSTRAINT FK_PROD_CATEGORY
FOREIGN KEY (CATEGORY_ID) REFERENCES PRODUCT_CATEGORY(CATEGORY_ID);

ALTER TABLE PRODUCTS
ADD CONSTRAINT FK_PROD_BRAND
FOREIGN KEY (BRAND_ID) REFERENCES PRODUCT_BRAND(BRAND_ID);

ALTER TABLE PRODUCTS
ADD CONSTRAINT FK_PROD_TYPE
FOREIGN KEY (TYPE_ID) REFERENCES PRODUCT_TYPE(TYPE_ID);

ALTER TABLE STOCK_MOVEMENT
ADD CONSTRAINT FK_STOCK_PRODUCT
FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID);

ALTER TABLE STOCK_MOVEMENT
ADD CONSTRAINT FK_STOCK_WAREHOUSE
FOREIGN KEY (WAREHOUSE_LIST_ID) REFERENCES WAREHOUSE_LIST(WAREHOUSE_LIST_ID);

-- =========================
-- SUPPLIER & PURCHASE
-- =========================
ALTER TABLE REQ_MASTER
ADD CONSTRAINT FK_REQ_EMPLOYEE
FOREIGN KEY (REQUESTED_BY) REFERENCES EMPLOYEES(EMPLOYEE_ID);

ALTER TABLE REQ_DETAILS
ADD CONSTRAINT FK_REQD_REQ
FOREIGN KEY (REQUISITION_ID) REFERENCES REQ_MASTER(REQUISITION_ID);

ALTER TABLE REQ_DETAILS
ADD CONSTRAINT FK_REQD_PRODUCT
FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID);

ALTER TABLE QUOTATION_MASTER
ADD CONSTRAINT FK_QUOT_REQ
FOREIGN KEY (REQ_ID) REFERENCES REQ_MASTER(REQUISITION_ID);

ALTER TABLE QUOTATION_DETAILS
ADD CONSTRAINT FK_QUOTD_MASTER
FOREIGN KEY (QUOT_MASTER_ID) REFERENCES QUOTATION_MASTER(QUOT_MASTER_ID);

ALTER TABLE QUOTATION_DETAILS
ADD CONSTRAINT FK_QUOTD_SUPPLIER
FOREIGN KEY (SUPPLIER_ID) REFERENCES SUPPLIERS(SUPPLIER_ID);

ALTER TABLE QUOTATION_DETAILS
ADD CONSTRAINT FK_QUOTD_PRODUCT
FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID);

ALTER TABLE PURCHASE_MASTER
ADD CONSTRAINT FK_PURCHASE_QUOT
FOREIGN KEY (QUOT_MASTER_ID) REFERENCES QUOTATION_MASTER(QUOT_MASTER_ID);

ALTER TABLE PURCHASE_MASTER
ADD CONSTRAINT FK_PURCHASE_SUPPLIER
FOREIGN KEY (SUPPLIER_ID) REFERENCES SUPPLIERS(SUPPLIER_ID);

ALTER TABLE PURCHASE_DETAILS
ADD CONSTRAINT FK_PURD_PURCHASE
FOREIGN KEY (PURCHASE_ID) REFERENCES PURCHASE_MASTER(PURCHASE_ID);

ALTER TABLE PURCHASE_DETAILS
ADD CONSTRAINT FK_PURD_PRODUCT
FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID);

-- =========================
-- SALES
-- =========================
ALTER TABLE SELL_ORDER_MASTER
ADD CONSTRAINT FK_SALE_CUSTOMER
FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID);

ALTER TABLE SELL_ORDER_DETAILS
ADD CONSTRAINT FK_SALEDET_MASTER
FOREIGN KEY (SELL_ORDER_ID) REFERENCES SELL_ORDER_MASTER(SELL_ORDER_ID);

ALTER TABLE SELL_ORDER_DETAILS
ADD CONSTRAINT FK_SALEDET_PRODUCT
FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID);

ALTER TABLE SELL_ORDER_DETAILS
ADD CONSTRAINT FK_SALEDET_WAREHOUSE
FOREIGN KEY (WAREHOUSE_LIST_ID) REFERENCES WAREHOUSE_LIST(WAREHOUSE_LIST_ID);

-- =========================
-- USER & SECURITY
-- =========================
ALTER TABLE USER_INFO
ADD CONSTRAINT FK_USER_EMP
FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEES(EMPLOYEE_ID);

-- =========================
-- PRODUCT RETURN MODULE
-- =========================
ALTER TABLE SALES_RETURN_MASTER
ADD CONSTRAINT FK_SRM_SALE
FOREIGN KEY (SELL_ORDER_ID) REFERENCES SELL_ORDER_MASTER(SELL_ORDER_ID);

ALTER TABLE SALES_RETURN_MASTER
ADD CONSTRAINT FK_SRM_CUSTOMER
FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID);

ALTER TABLE SALES_RETURN_DETAILS
ADD CONSTRAINT FK_SRD_MASTER
FOREIGN KEY (SALES_RETURN_ID) REFERENCES SALES_RETURN_MASTER(SALES_RETURN_ID);

ALTER TABLE SALES_RETURN_DETAILS
ADD CONSTRAINT FK_SRD_PRODUCT
FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID);

ALTER TABLE SALES_RETURN_DETAILS
ADD CONSTRAINT FK_SRD_WAREHOUSE
FOREIGN KEY (WAREHOUSE_LIST_ID) REFERENCES WAREHOUSE_LIST(WAREHOUSE_LIST_ID);

ALTER TABLE PURCHASE_RETURN_MASTER
ADD CONSTRAINT FK_PRM_PURCHASE
FOREIGN KEY (PURCHASE_ID) REFERENCES PURCHASE_MASTER(PURCHASE_ID);

ALTER TABLE PURCHASE_RETURN_MASTER
ADD CONSTRAINT FK_PRM_SUPPLIER
FOREIGN KEY (SUPPLIER_ID) REFERENCES SUPPLIERS(SUPPLIER_ID);

ALTER TABLE PURCHASE_RETURN_DETAILS
ADD CONSTRAINT FK_PRD_MASTER
FOREIGN KEY (PURCHASE_RETURN_ID) REFERENCES PURCHASE_RETURN_MASTER(PURCHASE_RETURN_ID);

ALTER TABLE PURCHASE_RETURN_DETAILS
ADD CONSTRAINT FK_PRD_PRODUCT
FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID);

ALTER TABLE PURCHASE_RETURN_DETAILS
ADD CONSTRAINT FK_PRD_WAREHOUSE
FOREIGN KEY (WAREHOUSE_LIST_ID) REFERENCES WAREHOUSE_LIST(WAREHOUSE_LIST_ID);
