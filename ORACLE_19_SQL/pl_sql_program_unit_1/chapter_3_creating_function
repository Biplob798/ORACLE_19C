

create or replace function get_sal
(p_id employees.employee_id%type)
return number
is
v_sal employees.salary%type;
begin
select salary into v_sal from employees
where employee_id=p_id;
return v_sal;
end get_sal;
/


-- use function as expression
-- or as a parameter value

execute DBMS_OUTPUT.PUT_LINE(get_sal(100));


-- use function as pl/sql expression with host variable

variable b_salary number

execute :b_salary:= get_sal(100);
print b_salary


-- use function as pl/sql expression with local variable

DECLARE
v_salary employees.salary%type;
BEGIN
v_salary := get_sal(100);
DBMS_OUTPUT.PUT_LINE('The salary is :'|| v_salary);
END;
/

-- use function as a prameter in another parameter

execute DBMS_OUTPUT.PUT_LINE(get_sal(100));

--  use function in sql statement 

select job_id,get_sal(employee_id) from employees;

select job_id,get_sal(100) from employees
where employee_id=100;

-- use function in sql expression
create or replace function tax(p_value in number)
return number
is
begin
return(p_value*0.08);
end tax;
/

select employee_id,last_name,salary,tax(salary)
from employees
where employee_id=100;

-- mutating error for function 
-- it occured because at a time to work query and modify same table

create or replace function dml_call_sql(p_sal in number)
return number 
is 
begin
insert into employees
(employee_id,
last_name,
email,
hire_date,
job_id,
salary)
values
(1,
'Frost',
'jfrost@company.com',
sysdate,
'SA_MAN',
p_sal
);
return (p_sal+100);
end dml_call_sql;
/

update employees
set salary =dml_call_sql(2000)
where employee_id=170;

-- named and mixed notation use in function

create or replace function f
(
    p_parameter_1 in number default 1,
    p_parameter_5 in number default 5
    )
return number
is
v_var number;
begin
v_var:=(p_parameter_1+(p_parameter_5*2));
return v_var;
end f;
/

select f(p_parameter_5 =>10) from dual;


create or replace function add_number(p_num1 in number,p_num2 in number)
return number
is
v_counter number;
begin
v_counter:=p_num1+p_num2;
return v_counter;
end add_number;
/

select add_number(2,4) from dual;